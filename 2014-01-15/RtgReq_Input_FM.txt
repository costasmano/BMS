  ` Method: RtgReq_Input_FM  ` Description  `   `   ` Parameters  ` $1 : $FormEvent_L  ` ----------------------------------------------------If (False)  ` User name (OS): Costas Manousakis  ` User name (4D): Designer  ` Date and time: 01/15/14, 12:31:42  ` ----------------------------------------------------  ` First ReleaseMods_2014_01 End if C_LONGINT($FormEvent_L)If (Count parameters>0)C_LONGINT($1)$FormEvent_L:=$1Else $FormEvent_L:=Form eventEnd if Case of : ($FormEvent_L=On Close Detail ): ($FormEvent_L=On Load )C_LONGINT($CurrL_L;$CurrT_L;$CurrR_L;$CurrB_L;$FormW_L;$FormH_L;$CurrW_L;$CurrH_L)GET WINDOW RECT($CurrL_L;$CurrT_L;$CurrR_L;$CurrB_L)$CurrW_L:=$CurrR_L-$CurrL_L$CurrH_L:=$CurrB_L-$CurrT_LGET FORM PROPERTIES([RatingRequests];"Input";$FormW_L;$FormH_L)C_BOOLEAN($Resize_b)$Resize_b:=($CurrW_L<$FormW_L) | ($CurrH_L<$FormH_L)If ($Resize_b)If ($CurrW_L<$FormW_L)$CurrR_L:=$FormW_L-$CurrW_LElse $CurrR_L:=0End if If ($CurrH_L<$FormH_L)$CurrB_L:=$FormH_L-$CurrH_LElse $CurrB_L:=0End if RESIZE FORM WINDOW($CurrR_L;$CurrB_L)End if If (Is new record([RatingRequests]))[RatingRequests]BIN:=[Bridge MHD NBIS]BINInc_Sequence ("RatingRequest";->[RatingRequests]RatingRequestID_L)End if InitChangeStack (1)  `requestInitChangeStack (2)  `AddtionalQUERY([AddtlRatingRequests];[AddtlRatingRequests]RatingRequestID_L=[RatingRequests]RatingRequestID_L)ORDER BY([AddtlRatingRequests];[AddtlRatingRequests]NewRequestDate_d;<)  `start the lb for the addtl requestsLB_Tasks ("ADDTOLIST";"AddtlReq";"";"Input"): ($FormEvent_L=On Validate )If (Is new record([RatingRequests]))LogNewRecord (->[Bridge MHD NBIS]BIN;->[RatingRequests]BIN;->[RatingRequests]RatingRequestID_L;1;"RatingRequest")End if PushAllChanges (1;->[RatingRequests])FlushGrpChgs (1;->[Bridge MHD NBIS]BIN;->[RatingRequests]BIN;->[RatingRequests]RatingRequestID_L;1): ($FormEvent_L=On Unload )End case 