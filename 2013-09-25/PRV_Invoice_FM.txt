  ` Method: PRV_Invoice_FM  ` Description  `   `   ` Parameters  ` $1 : $FormEvent_L  ` ----------------------------------------------------If (False)  ` User name (OS): Costas Manousakis  ` User name (4D): Designer  ` Date and time: 06/14/12, 14:39:36  ` ----------------------------------------------------  ` First ReleaseMods_2012_06   ` Modified by: Costas Manousakis-(Designer)-(9/25/13 15:02:54)Mods_2013_09   `  `Copied to DEVEnd if C_LONGINT($FormEvent_L)If (Count parameters>0)C_LONGINT($1)$FormEvent_L:=$1Else $FormEvent_L:=Form eventEnd if Case of : ($FormEvent_L=On Close Detail ): ($FormEvent_L=On Load )If (Is new record([Invoice_Maintenance]))Inc_Sequence ("InvoiceMaint";->[Invoice_Maintenance]InvoiceID)C_LONGINT(PRV_LASTSEQNO_L;PRV_CURRASSIGNID_L)PRV_CURRASSIGNID_L:=[Contract_Assignment_Maintenance]AssignIDBegin SQLselect max(Invoice_Maintenance.InvoiceNo)from [Invoice_Maintenance]where Invoice_Maintenance.AssignID_L = :PRV_CURRASSIGNID_Linto :PRV_LASTSEQNO_LEnd SQL[Invoice_Maintenance]DateReceived:=Current date(*)[Invoice_Maintenance]InvoiceNo:=PRV_LASTSEQNO_L+1[Invoice_Maintenance]ContractNo:=[Contract_Assignment_Maintenance]ContractNo[Invoice_Maintenance]AssignID_L:=[Contract_Assignment_Maintenance]AssignID[Invoice_Maintenance]AssignNo:=[Contract_Assignment_Maintenance]AssignNoEnd if PRV_InvActCostTLF_r:=[Invoice_Maintenance]TotalLimFeeConstr+[Invoice_Maintenance]TotalLimFeeDesIf (PRV_LockedAssignment_b)SET ENTERABLE(*;"DE@";False)SET VISIBLE(*;"DE@Btn";False)End if : ($FormEvent_L=On Data Change )PRV_InvActCostTLF_r:=[Invoice_Maintenance]TotalLimFeeConstr+[Invoice_Maintenance]TotalLimFeeDes: ($FormEvent_L=On Validate ): ($FormEvent_L=On Unload )End case   `End PRV_Invoice_FM